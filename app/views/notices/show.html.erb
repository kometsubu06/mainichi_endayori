<div class="space-y-4">
  <!-- 戻る -->
  <div>
    <%= link_to "← お知らせ一覧へ", notices_path,
          class: "inline-flex items-center text-sm text-sky-700 hover:underline" %>
  </div>

    <%= render "shared/notice_body_card", notice: @notice, show_submission_badge: true %>
    <!-- メタ情報 -->
    <ul class="mt-6 pt-4 border-t text-sm text-slate-600 space-y-1">
      <% if @notice.due_on.present? %>
        <li>締切：<%= @notice.due_on.strftime("%-m月%-d日") %></li>
      <% end %>
      <li>提出の要否：<%= @notice.require_submission ? "必要" : "不要" %></li>
      <li>掲載日時：<%= (@notice.published_at || @notice.created_at).in_time_zone.strftime("%-m月%-d日 %H:%M") %></li>
    </ul>
  </div>
</div>

<%# 未読なら「既読にする」ボタンを表示（Turboでバッジだけ置き換え） %>
<% if @unread %>
  <div style="margin-top:1rem;">
    <%= button_to '既読にする',
          read_notice_path(@notice),
          method: :post,
          data: { turbo: true },
          params: (@notice.has_attribute?(:lock_version) ? { lock_version: @notice.lock_version } : {}),
          class: 'btn' %>
  </div>
<% else %>
  <p style="margin-top:1rem; color:#666;">このお知らせは既読です。</p>
<% end %>
