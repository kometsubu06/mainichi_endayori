<article class="relative border rounded-xl p-4 bg-white hover:shadow-sm transition">
  <div class="flex items-start gap-3">
    <i class="fa-solid fa-bullhorn text-sky-600 mt-0.5"></i>

    <div class="flex-1 min-w-0">
      <h3 class="font-medium text-slate-900 truncate"><%= notice.title %></h3>

      <%# 概要 or 本文先頭を2行相当で %>
      <p class="text-sm text-slate-600">
        <%= truncate(
              (notice.respond_to?(:summary) && notice.summary.presence) || strip_tags(notice.body.to_s),
              length: 80
            ) %>
      </p>

      <div class="mt-2 flex items-center gap-2 text-xs text-slate-500">
        <span>
          <%= ((notice.published_at || notice.created_at).in_time_zone.strftime("%-m月%-d日 %H:%M")) %>
        </span>

        <%# 期限バッジ %>
        <% if notice.respond_to?(:due_on) && notice.due_on.present? %>
          <span class="inline-flex items-center rounded-full px-2 py-0.5 bg-amber-50 text-amber-700 border border-amber-200">
            締切 <%= notice.due_on.strftime("%-m月%-d日") %>
          </span>
        <% end %>

        <%# 未読バッジ（コントローラで @read_ids を用意済み想定） %>
        <% if defined?(@read_ids) && !@read_ids.include?(notice.id) %>
          <span class="inline-flex items-center rounded-full px-2 py-0.5 bg-rose-600 text-white">未読</span>
        <% end %>
      </div>
    </div>
  </div>

  <%# 全体をクリックで詳細へ %>
  <%= link_to '', notice_path(notice), class: 'absolute inset-0', aria: { label: '詳細へ' } %>
</article>